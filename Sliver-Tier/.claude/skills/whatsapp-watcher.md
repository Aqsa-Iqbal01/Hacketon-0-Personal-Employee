# WhatsApp Watcher Skill

## Purpose
Monitors WhatsApp Web for new messages, detects urgent keywords, and creates action files for important messages.

## When to Use
- User wants to check WhatsApp for new messages
- User wants to monitor urgent WhatsApp messages
- User asks to "run WhatsApp watcher" or "check WhatsApp"
- User wants to see WhatsApp message activity

## Commands

### Start WhatsApp Watcher
```bash
cd /d "C:\Users\HAROON TRADERS\Desktop\ar portfolio\Hacketon-silver-tier"
python whatsapp_watcher.py
```

### Check Recent Logs
```bash
cd /d "C:\Users\HAROON TRADERS\Desktop\ar portfolio\Hacketon-silver-tier"
powershell -Command "Get-Content whatsapp_watcher.log -Tail 30"
```

### Check Action Files Created
```bash
dir "Personal AI Employee Vault\Needs Action\*WHATSAPP*" /b
```

### View Specific Action File
```bash
type "Personal AI Employee Vault\Needs Action\WHATSAPP_*.md"
```

## Expected Output

### When Urgent Message Found:
```
============================================================
  ðŸ“± WHATSAPP URGENT MESSAGE DETECTED!
============================================================
  ðŸ‘¤ From: Contact Name
  ðŸ“ Message: Urgent! Need the invoice by tomorrow...
  ðŸ”‘ Keywords: urgent, invoice
  ðŸ·ï¸  Priority: HIGH
  âœ… Action File: WHATSAPP_MSG_1771870945.md
============================================================
```

### When No New Messages:
```
â³  No new urgent WhatsApp messages (next check: 30 sec)
```

### Browser QR Scan Required:
```
============================================================
  ðŸ“± WHATSAPP WATCHER
============================================================
  ðŸ“· Please scan QR code in the browser
  1. Open WhatsApp on your phone
  2. Go to Settings > Linked Devices
  3. Scan the QR code
  ============================================================
```

## Monitoring

The watcher:
- Checks every 30 seconds automatically
- Monitors WhatsApp Web for new messages
- Detects urgent keywords: urgent, asap, help, invoice, payment, important, need
- Creates action files in `Needs_Action` folder
- Logs all activity to `whatsapp_watcher.log`
- Filters out already processed messages

## Keywords Monitored
- urgent
- asap
- help
- invoice
- payment
- important
- need

## Stop Watcher
Press `Ctrl+C` to stop the watcher

## Related Files
- Script: `whatsapp_watcher.py`
- Logs: `whatsapp_watcher.log`
- Action Files: `Personal AI Employee Vault/Needs Action/`
- Session: `whatsapp_session/`

## Troubleshooting

### Browser won't open:
```bash
taskkill /F /IM chrome.exe
rmdir /s /q "whatsapp_session"
python whatsapp_watcher.py
```

### QR Code not showing:
```bash
taskkill /F /IM chrome.exe
rmdir /s /q "whatsapp_session"
python whatsapp_watcher.py
# Wait for browser to open and display QR code
```

### Check if running:
```bash
tasklist | findstr python
```

### View full logs:
```bash
type whatsapp_watcher.log | more
```

## First Time Setup

1. Run the watcher:
   ```bash
   python whatsapp_watcher.py
   ```

2. Browser will open automatically

3. Scan QR code:
   - Open WhatsApp on your phone
   - Go to Settings > Linked Devices
   - Tap "Link a Device"
   - Scan the QR code in the browser

4. Session will be saved for future use

## Integration
Works with:
- Base Watcher (common functionality)
- Approval Workflow (for urgent message handling)
- Obsidian Vault (stores all action files)
- MCP Email Server (can forward urgent messages via email)

## Action File Structure

```markdown
---
type: whatsapp_message
source: whatsapp
from: Contact Name
message: Urgent! Need help with...
keywords: urgent, help
priority: high
status: pending
---

# WhatsApp Message

**From:** Contact Name
**Message:** Urgent! Need help with...

## Suggested Actions

- [ ] Review message content
- [ ] Respond to sender
- [ ] Take required action
- [ ] Mark as done after responding

---
*Generated by WhatsApp Watcher*
```
